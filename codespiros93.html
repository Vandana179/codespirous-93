<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Website Audit Tool</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #ebee43;
            --secondary: #55a30cff;
            --success: #4cc9f0;
            --warning: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --security: #e63946;
            --performance: #2a9d8f;
            --seo: #f4a261;
            --accessibility: #3a86ff;
            --safe: #2ecc71;
            --moderate: #f39c12;
            --risky: #e74c3c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fb;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .audit-form {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
            position: relative;
        }
        
        .url-validation {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 5px;
        }
        
        .url-valid {
            background-color: rgba(46, 204, 113, 0.2);
            color: #27ae60;
            border: 1px solid #2ecc71;
        }
        
        .url-invalid {
            background-color: rgba(231, 76, 60, 0.2);
            color: #c0392b;
            border: 1px solid #e74c3c;
        }
        
        .url-check-list {
            margin-top: 15px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .url-check-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .url-check-item:last-child {
            margin-bottom: 0;
        }
        
        .check-icon {
            margin-right: 10px;
            font-size: 16px;
        }
        
        .check-valid {
            color: #27ae60;
        }
        
        .check-invalid {
            color: #c0392b;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        input[type="url"] {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="url"]:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        .check-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .check-option {
            display: flex;
            align-items: center;
        }
        
        .check-option input {
            margin-right: 10px;
        }
        
        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
            font-weight: 600;
        }
        
        button:hover {
            background: var(--secondary);
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 30px 0;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .results {
            display: none;
            margin-top: 30px;
        }
        
        .security-status {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
            display: flex;
            align-items: center;
        }
        
        .status-icon {
            font-size: 2.5rem;
            margin-right: 20px;
        }
        
        .status-safe {
            color: var(--safe);
        }
        
        .status-moderate {
            color: var(--moderate);
        }
        
        .status-risky {
            color: var(--risky);
        }
        
        .status-content h3 {
            margin-bottom: 10px;
        }
        
        .overall-score {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            text-align: center;
            margin-bottom: 30px;
        }
        
        .overall-score-value {
            font-size: 3.5rem;
            font-weight: 700;
            margin: 15px 0;
            color: var(--primary);
        }
        
        .overall-chart-container {
            width: 300px;
            height: 300px;
            margin: 0 auto;
        }
        
        .score-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .score-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            text-align: center;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .score-card .improvement-tip {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--light);
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: help;
            font-size: 14px;
            font-weight: bold;
        }
        
        .score-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 15px 0;
        }
        
        .security { color: var(--security); }
        .performance { color: var(--performance); }
        .seo { color: var(--seo); }
        .accessibility { color: var(--accessibility); }
        
        .chart-container {
            width: 100%;
            height: 120px;
            margin-top: 10px;
        }
        
        .issues-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .tabs {
            display: flex;
            background: #f1f5f9;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 15px 20px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }
        
        .tab.active {
            background: white;
            border-bottom: 3px solid var(--primary);
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .issue {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        
        .issue:last-child {
            border-bottom: none;
        }
        
        .issue-content {
            flex: 1;
        }
        
        .issue-title {
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }
        
        .issue-severity {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 12px;
            margin-left: 10px;
        }
        
        .high { background: #ffcccc; color: #d00000; }
        .medium { background: #fff3cd; color: #856404; }
        .low { background: #d4edda; color: #155724; }
        
        .issue-description {
            margin-bottom: 10px;
            color: var(--gray);
        }
        
        .issue-solution {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .suggestion-action {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .suggestions-portal {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .suggestions-portal h2 {
            margin-bottom: 20px;
        }
        
        .suggestion-form textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            margin-bottom: 15px;
            min-height: 120px;
            resize: vertical;
        }
        
        .suggestion-form button {
            background: var(--success);
        }
        
        .suggestion-form button:hover {
            background: #3aa9c9;
        }
        
        .suggestion-feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
        
        .suggestion-success {
            background-color: rgba(46, 204, 113, 0.2);
            color: #27ae60;
            border: 1px solid #2ecc71;
        }
        
        .suggestion-error {
            background-color: rgba(231, 76, 60, 0.2);
            color: #c0392b;
            border: 1px solid #e74c3c;
        }
        
        footer {
            text-align: center;
            padding: 30px 0;
            color: var(--gray);
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .score-cards {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .security-status {
                flex-direction: column;
                text-align: center;
            }
            
            .status-icon {
                margin-right: 0;
                margin-bottom: 15px;
            }
            
            .overall-chart-container {
                width: 250px;
                height: 250px;
            }
            
            .issue {
                flex-direction: column;
            }
            
            .suggestion-action {
                width: 100%;
                margin-top: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Advanced Website Audit Tool</h1>
            <p class="subtitle">Comprehensive security, performance, SEO, and accessibility analysis</p>
        </header>
        
        <div class="audit-form">
            <div id="urlValidation" class="url-validation">
                <h3>URL Validation Results</h3>
                <div class="url-check-list" id="urlCheckList">
                    <div class="url-check-item">
                        <span class="check-icon">⏳</span>
                        <span>Enter a URL to begin validation</span>
                    </div>
                </div>
            </div>
            <form id="auditForm">
                <div class="form-group">
                    <label for="websiteUrl">Website URL</label>
                    <input type="url" id="websiteUrl" placeholder="https://example.com" required>
                    <div id="urlStatus" style="margin-top: 5px; font-size: 14px;"></div>
                </div>
                
                <div class="form-group">
                    <label>Audit Options</label>
                    <div class="check-options">
                        <div class="check-option">
                            <input type="checkbox" id="securityCheck" checked>
                            <label for="securityCheck">Security</label>
                        </div>
                        <div class="check-option">
                            <input type="checkbox" id="performanceCheck" checked>
                            <label for="performanceCheck">Performance</label>
                        </div>
                        <div class="check-option">
                            <input type="checkbox" id="seoCheck" checked>
                            <label for="seoCheck">SEO</label>
                        </div>
                        <div class="check-option">
                            <input type="checkbox" id="accessibilityCheck" checked>
                            <label for="accessibilityCheck">Accessibility</label>
                        </div>
                    </div>
                </div>
                
                <button type="submit">Run Comprehensive Audit</button>
            </form>
        </div>
        
        <div class="loading" id="loadingSection">
            <div class="spinner"></div>
            <p>Analyzing your website. This may take a few moments...</p>
            <div id="auditProgress" style="margin-top: 20px;"></div>
        </div>
        
        <div class="results" id="resultsSection">
            <h2>Audit Results</h2>
            <p id="auditUrl" style="margin-bottom: 20px;"></p>
            
            <div class="security-status" id="securityStatus">
                <div class="status-icon" id="statusIcon">🔒</div>
                <div class="status-content">
                    <h3 id="statusTitle">Security Status</h3>
                    <p id="statusDescription">We're analyzing your website's security...</p>
                </div>
            </div>
            
            <div class="overall-score">
                <h3>Overall Score</h3>
                <div class="overall-score-value" id="overallScore">0%</div>
                <div class="overall-chart-container">
                    <canvas id="overallChart"></canvas>
                </div>
            </div>
            
            <div class="score-cards">
                <div class="score-card">
                    <div class="improvement-tip" title="Quick tip">💡</div>
                    <h3>Security</h3>
                    <div class="score-value security" id="securityScore">0%</div>
                    <p id="securityIssues">0 issues found</p>
                    <div class="chart-container">
                        <canvas id="securityChart"></canvas>
                    </div>
                </div>
                
                <div class="score-card">
                    <div class="improvement-tip" title="Quick tip">💡</div>
                    <h3>Performance</h3>
                    <div class="score-value performance" id="performanceScore">0%</div>
                    <p id="performanceIssues">0 issues found</p>
                    <div class="chart-container">
                        <canvas id="performanceChart"></canvas>
                    </div>
                </div>
                
                <div class="score-card">
                    <div class="improvement-tip" title="Quick tip">💡</div>
                    <h3>SEO</h3>
                    <div class="score-value seo" id="seoScore">0%</div>
                    <p id="seoIssues">0 issues found</p>
                    <div class="chart-container">
                        <canvas id="seoChart"></canvas>
                    </div>
                </div>
                
                <div class="score-card">
                    <div class="improvement-tip" title="Quick tip">💡</div>
                    <h3>Accessibility</h3>
                    <div class="score-value accessibility" id="accessibilityScore">0%</div>
                    <p id="accessibilityIssues">0 issues found</p>
                    <div class="chart-container">
                        <canvas id="accessibilityChart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="issues-container">
                <div class="tabs">
                    <div class="tab active" data-tab="security">Security Issues</div>
                    <div class="tab" data-tab="performance">Performance Issues</div>
                    <div class="tab" data-tab="seo">SEO Issues</div>
                    <div class="tab" data-tab="accessibility">Accessibility Issues</div>
                </div>
                
                <div class="tab-content active" id="securityContent">
                    <!-- Security issues will be populated here -->
                </div>
                
                <div class="tab-content" id="performanceContent">
                    <!-- Performance issues will be populated here -->
                </div>
                
                <div class="tab-content" id="seoContent">
                    <!-- SEO issues will be populated here -->
                </div>
                
                <div class="tab-content" id="accessibilityContent">
                    <!-- Accessibility issues will be populated here -->
                </div>
            </div>
            
            <div class="suggestions-portal">
                <h2>Improvement Suggestions Portal</h2>
                <p>Based on your audit results, we recommend these prioritized actions:</p>
                
                <div id="prioritySuggestions">
                    <!-- Priority suggestions will be added here -->
                </div>
                
                <div class="suggestion-form">
                    <h3>Need Custom Solutions?</h3>
                    <p>Describe your specific challenges and our experts will provide tailored recommendations.</p>
                    <textarea id="suggestionText" placeholder="Describe your website challenges here..."></textarea>
                    <button id="submitSuggestion">Submit Request</button>
                    <div id="suggestionFeedback" class="suggestion-feedback"></div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Hackathon; 2025| Code Spiros</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const auditForm = document.getElementById('auditForm');
            const websiteUrl = document.getElementById('websiteUrl');
            const urlStatus = document.getElementById('urlStatus');
            const urlCheckList = document.getElementById('urlCheckList');
            const loadingSection = document.getElementById('loadingSection');
            const resultsSection = document.getElementById('resultsSection');
            const auditUrl = document.getElementById('auditUrl');
            const auditProgress = document.getElementById('auditProgress');
            const securityStatus = document.getElementById('securityStatus');
            const statusIcon = document.getElementById('statusIcon');
            const statusTitle = document.getElementById('statusTitle');
            const statusDescription = document.getElementById('statusDescription');
            const submitSuggestion = document.getElementById('submitSuggestion');
            const suggestionText = document.getElementById('suggestionText');
            const suggestionFeedback = document.getElementById('suggestionFeedback');
            const prioritySuggestions = document.getElementById('prioritySuggestions');
            
            // Chart instances
            let overallChart, securityChart, performanceChart, seoChart, accessibilityChart;
            
            // URL validation
            websiteUrl.addEventListener('input', validateUrl);
            
            function validateUrl() {
                const url = websiteUrl.value.trim();
                if (!url) {
                    urlCheckList.innerHTML = '<div class="url-check-item"><span class="check-icon">⏳</span><span>Enter a URL to begin validation</span></div>';
                    return false;
                }
                
                // Basic URL validation
                const urlPattern = /^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/;
                if (!urlPattern.test(url)) {
                    urlStatus.textContent = "Please enter a valid URL";
                    urlStatus.style.color = "red";
                    urlCheckList.innerHTML = '<div class="url-check-item"><span class="check-icon check-invalid">❌</span><span>Invalid URL format</span></div>';
                    return false;
                }
                
                // Check URL against SEO and usability criteria
                const checks = [
                    {
                        name: "URL is short and descriptive",
                        valid: url.length <= 60,
                        description: url.length <= 60 ? 
                            `Good length (${url.length} characters)` : 
                            `Too long (${url.length} characters, aim for ≤60)`
                    },
                    {
                        name: "Contains relevant keywords",
                        valid: url.split('/').pop().split('-').length >= 2 || url.split('/').pop().length > 15,
                        description: "URL should contain descriptive keywords"
                    },
                    {
                        name: "Uses hyphens for separation",
                        valid: !url.includes('_'),
                        description: url.includes('_') ? 
                            "Use hyphens (-) instead of underscores (_)" : 
                            "Good separator usage"
                    },
                    {
                        name: "Uses lowercase letters",
                        valid: url === url.toLowerCase(),
                        description: url === url.toLowerCase() ? 
                            "All lowercase - good" : 
                            "Contains uppercase letters - not recommended"
                    },
                    {
                        name: "Avoids unnecessary parameters",
                        valid: !url.includes('?') || (url.includes('?') && url.split('?')[1].split('&').length <= 2),
                        description: url.includes('?') ? 
                            `Contains ${url.split('?')[1].split('&').length} parameters` : 
                            "No URL parameters - good"
                    },
                    {
                        name: "Uses secure protocol (HTTPS)",
                        valid: url.startsWith('https://'),
                        description: url.startsWith('https://') ? 
                            "Uses HTTPS - good" : 
                            "Consider using HTTPS for security"
                    },
                    {
                        name: "Avoids special characters",
                        valid: !/[%&@]/.test(url),
                        description: /[%&@]/.test(url) ? 
                            "Contains special characters" : 
                            "No problematic special characters - good"
                    }
                ];
                
                // Count valid checks
                const validCount = checks.filter(check => check.valid).length;
                const totalCount = checks.length;
                const score = Math.round((validCount / totalCount) * 100);
                
                // Update validation UI
                urlStatus.textContent = `URL SEO Score: ${score}%`;
                urlStatus.style.color = score >= 70 ? "green" : score >= 50 ? "orange" : "red";
                
                // Update check list
                urlCheckList.innerHTML = '';
                checks.forEach(check => {
                    const checkItem = document.createElement('div');
                    checkItem.className = 'url-check-item';
                    checkItem.innerHTML = `
                        <span class="check-icon ${check.valid ? 'check-valid' : 'check-invalid'}">${check.valid ? '✓' : '✗'}</span>
                        <span>${check.name}: ${check.description}</span>
                    `;
                    urlCheckList.appendChild(checkItem);
                });
                
                // Add overall score
                const scoreItem = document.createElement('div');
                scoreItem.className = 'url-check-item';
                scoreItem.style.marginTop = '10px';
                scoreItem.style.fontWeight = 'bold';
                scoreItem.innerHTML = `
                    <span class="check-icon">📊</span>
                    <span>Overall SEO Score: ${score}%</span>
                `;
                urlCheckList.appendChild(scoreItem);
                
                return true;
            }
            
            // Tab functionality
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and content
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    document.getElementById(`${tab.dataset.tab}Content`).classList.add('active');
                });
            });
            
            // Form submission
            auditForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                if (!validateUrl()) return;
                
                const url = websiteUrl.value;
                const securityCheck = document.getElementById('securityCheck').checked;
                const performanceCheck = document.getElementById('performanceCheck').checked;
                const seoCheck = document.getElementById('seoCheck').checked;
                const accessibilityCheck = document.getElementById('accessibilityCheck').checked;
                
                // Show loading state
                loadingSection.style.display = 'block';
                resultsSection.style.display = 'none';
                auditProgress.textContent = "Initializing audit...";
                
                try {
                    // Simulate progress updates
                    const progressStages = [
                        "Checking website availability...",
                        "Analyzing security headers...",
                        "Testing performance metrics...",
                        "Auditing SEO factors...",
                        "Checking accessibility compliance...",
                        "Compiling final report..."
                    ];
                    
                    for (let i = 0; i < progressStages.length; i++) {
                        auditProgress.textContent = progressStages[i];
                        await new Promise(resolve => setTimeout(resolve, 500));
                    }
                    
                    // Simulate audit results
                    const auditResults = simulateAuditResults(url);
                    
                    // Display results
                    displayResults(auditResults);
                    
                    // Show results section
                    loadingSection.style.display = 'none';
                    resultsSection.style.display = 'block';
                    auditUrl.textContent = `Results for: ${url}`;
                    
                } catch (error) {
                    console.error('Error during audit:', error);
                    loadingSection.style.display = 'none';
                    alert('An error occurred during the audit. Please try again.');
                }
            });
            
            // Suggestion submission
            submitSuggestion.addEventListener('click', function() {
                const suggestion = suggestionText.value.trim();
                if (!suggestion) {
                    showSuggestionFeedback("Please describe your challenges before submitting.", false);
                    return;
                }
                
                // Simulate submission
                showSuggestionFeedback("Sending your request...", true);
                
                setTimeout(() => {
                    showSuggestionFeedback("✓ Thank you! Our experts will review your request and contact you within 24 hours.", true);
                    suggestionText.value = "";
                }, 1500);
            });
            
            function showSuggestionFeedback(message, isSuccess) {
                suggestionFeedback.textContent = message;
                suggestionFeedback.className = isSuccess ? 
                    "suggestion-feedback suggestion-success" : 
                    "suggestion-feedback suggestion-error";
                suggestionFeedback.style.display = "block";
                
                // Hide after 5 seconds
                setTimeout(() => {
                    suggestionFeedback.style.display = "none";
                }, 5000);
            }
            
            function simulateAuditResults(url) {
                // This function simulates audit results for demonstration purposes
                // In a real implementation, this data would come from the backend
                
                // Generate security score (weighted toward better scores)
                const securityScore = Math.floor(Math.random() * 30) + 70;
                
                // Determine security status
                let securityLevel, statusIcon, statusText, statusDesc;
                
                if (securityScore >= 90) {
                    securityLevel = "safe";
                    statusIcon = "🛡️";
                    statusText = "Highly Secure Website";
                    statusDesc = "Your website demonstrates strong security practices. Keep maintaining these standards.";
                } else if (securityScore >= 70) {
                    securityLevel = "moderate";
                    statusIcon = "🔒";
                    statusText = "Moderately Secure Website";
                    statusDesc = "Your website has decent security but could use some improvements in key areas.";
                } else {
                    securityLevel = "risky";
                    statusIcon = "⚠️";
                    statusText = "Security Risks Detected";
                    statusDesc = "Your website has significant security vulnerabilities that need immediate attention.";
                }
                
                return {
                    security: {
                        score: securityScore,
                        level: securityLevel,
                        statusIcon: statusIcon,
                        statusText: statusText,
                        statusDesc: statusDesc,
                        issues: [
                            {
                                title: "Missing security headers",
                                severity: "medium",
                                description: "Your website is missing important security headers like X-Content-Type-Options, X-Frame-Options, and X-XSS-Protection.",
                                solution: "Configure your web server to include security headers. For Apache, add to .htaccess: Header set X-Content-Type-Options nosniff, Header set X-Frame-Options DENY, Header set X-XSS-Protection '1; mode=block'"
                            },
                            {
                                title: "No HTTPS redirection",
                                severity: "high",
                                description: "Your website doesn't automatically redirect HTTP requests to HTTPS.",
                                solution: "Set up 301 redirects from HTTP to HTTPS in your server configuration or use a service like Cloudflare to enforce HTTPS."
                            },
                            (securityScore < 80 ? {
                                title: "Outdated software version",
                                severity: "high",
                                description: "Your website is running an outdated version of WordPress (version 5.4 detected).",
                                solution: "Update WordPress to the latest version immediately. Also update all plugins and themes to their latest versions."
                            } : null)
                        ].filter(Boolean)
                    },
                    performance: {
                        score: Math.floor(Math.random() * 40) + 60, // 60-100
                        issues: [
                            {
                                title: "Large image files",
                                severity: "medium",
                                description: "Several images on your website are not optimized and could be compressed without noticeable quality loss.",
                                solution: "Compress images using tools like TinyPNG or ImageOptim before uploading. Consider using WebP format for better compression."
                            },
                            {
                                title: "No browser caching",
                                severity: "low",
                                description: "Your website doesn't leverage browser caching for static assets.",
                                solution: "Configure your server to set appropriate cache headers for static resources. For Apache, add to .htaccess: <FilesMatch '\\.(jpg|jpeg|png|gif|js|css)$'> Header set Cache-Control 'max-age=31536000' </FilesMatch>"
                            }
                        ]
                    },
                    seo: {
                        score: Math.floor(Math.random() * 40) + 60, // 60-100
                        issues: [
                            {
                                title: "Missing meta descriptions",
                                severity: "medium",
                                description: "Several pages on your website are missing meta descriptions.",
                                solution: "Add unique, descriptive meta descriptions (150-160 characters) to all important pages on your website."
                            },
                            {
                                title: "Slow page speed",
                                severity: "medium",
                                description: "Your website loads slower than 70% of tested websites, which can negatively impact SEO.",
                                solution: "Implement performance optimizations like image compression, browser caching, and code minification to improve load times."
                            }
                        ]
                    },
                    accessibility: {
                        score: Math.floor(Math.random() * 40) + 60, // 60-100
                        issues: [
                            {
                                title: "Low contrast text",
                                severity: "medium",
                                description: "Some text elements have insufficient color contrast, making them difficult to read for users with visual impairments.",
                                solution: "Ensure all text has a contrast ratio of at least 4.5:1 for normal text and 3:1 for large text. Use tools like WebAIM's Contrast Checker."
                            },
                            {
                                title: "Missing alt attributes",
                                severity: "high",
                                description: "Several images on your website are missing alt attributes.",
                                solution: "Add descriptive alt text to all informative images. For decorative images, use empty alt attributes (alt='')."
                            }
                        ]
                    }
                };
            }
            
            function displayResults(results) {
                // Calculate overall score
                const overallScore = Math.round(
                    (results.security.score + results.performance.score + 
                     results.seo.score + results.accessibility.score) / 4
                );
                
                // Update security status
                statusIcon.textContent = results.security.statusIcon;
                statusTitle.textContent = results.security.statusText;
                statusDescription.textContent = results.security.statusDesc;
                securityStatus.className = `security-status status-${results.security.level}`;
                
                // Update overall score
                document.getElementById('overallScore').textContent = `${overallScore}%`;
                
                // Update scores
                document.getElementById('securityScore').textContent = `${results.security.score}%`;
                document.getElementById('performanceScore').textContent = `${results.performance.score}%`;
                document.getElementById('seoScore').textContent = `${results.seo.score}%`;
                document.getElementById('accessibilityScore').textContent = `${results.accessibility.score}%`;
                
                // Update issue counts
                document.getElementById('securityIssues').textContent = `${results.security.issues.length} issues found`;
                document.getElementById('performanceIssues').textContent = `${results.performance.issues.length} issues found`;
                document.getElementById('seoIssues').textContent = `${results.seo.issues.length} issues found`;
                document.getElementById('accessibilityIssues').textContent = `${results.accessibility.issues.length} issues found`;
                
                // Create charts
                createCharts(results, overallScore);
                
                // Populate security issues
                const securityContent = document.getElementById('securityContent');
                securityContent.innerHTML = '';
                results.security.issues.forEach(issue => {
                    securityContent.appendChild(createIssueElement(issue));
                });
                
                // Populate performance issues
                const performanceContent = document.getElementById('performanceContent');
                performanceContent.innerHTML = '';
                results.performance.issues.forEach(issue => {
                    performanceContent.appendChild(createIssueElement(issue));
                });
                
                // Populate SEO issues
                const seoContent = document.getElementById('seoContent');
                seoContent.innerHTML = '';
                results.seo.issues.forEach(issue => {
                    seoContent.appendChild(createIssueElement(issue));
                });
                
                // Populate accessibility issues
                const accessibilityContent = document.getElementById('accessibilityContent');
                accessibilityContent.innerHTML = '';
                results.accessibility.issues.forEach(issue => {
                    accessibilityContent.appendChild(createIssueElement(issue));
                });
                
                // Generate priority suggestions
                generatePrioritySuggestions(results);
            }
            
            function createCharts(results, overallScore) {
                // Destroy existing charts if they exist
                if (overallChart) overallChart.destroy();
                if (securityChart) securityChart.destroy();
                if (performanceChart) performanceChart.destroy();
                if (seoChart) seoChart.destroy();
                if (accessibilityChart) accessibilityChart.destroy();
                
                // Overall chart (pie chart)
                const overallCtx = document.getElementById('overallChart').getContext('2d');
                overallChart = new Chart(overallCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Security', 'Performance', 'SEO', 'Accessibility'],
                        datasets: [{
                            data: [
                                results.security.score, 
                                results.performance.score, 
                                results.seo.score, 
                                results.accessibility.score
                            ],
                            backgroundColor: [
                                '#e63946',
                                '#2a9d8f',
                                '#f4a261',
                                '#3a86ff'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    font: {
                                        size: 12
                                    },
                                    padding: 20
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.label}: ${context.raw}%`;
                                    }
                                }
                            }
                        },
                        cutout: '70%'
                    }
                });
                
                // Individual score charts (circular progress bars)
                createProgressChart('securityChart', results.security.score, '#e63946');
                createProgressChart('performanceChart', results.performance.score, '#2a9d8f');
                createProgressChart('seoChart', results.seo.score, '#f4a261');
                createProgressChart('accessibilityChart', results.accessibility.score, '#3a86ff');
            }
            
            function createProgressChart(canvasId, score, color) {
                const ctx = document.getElementById(canvasId).getContext('2d');
                const chart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        datasets: [{
                            data: [score, 100 - score],
                            backgroundColor: [color, '#f0f0f0'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: false
                            }
                        },
                        cutout: '80%'
                    }
                });
                
                // Add text in the center
                Chart.register({
                    id: 'centerText',
                    afterDraw: function(chart) {
                        const width = chart.width;
                        const height = chart.height;
                        const ctx = chart.ctx;
                        
                        ctx.restore();
                        ctx.font = "bold 20px 'Segoe UI'";
                        ctx.textBaseline = "middle";
                        ctx.textAlign = "center";
                        ctx.fillStyle = color;
                        ctx.fillText(score + "%", width / 2, height / 2);
                        ctx.save();
                    }
                });
                
                return chart;
            }
            
            function createIssueElement(issue) {
                const issueEl = document.createElement('div');
                issueEl.className = 'issue';
                
                issueEl.innerHTML = `
                    <div class="issue-content">
                        <div class="issue-title">
                            ${issue.title}
                            <span class="issue-severity ${issue.severity}">${issue.severity}</span>
                        </div>
                        <div class="issue-description">${issue.description}</div>
                        <div class="issue-solution">
                            <strong>Solution:</strong> ${issue.solution}
                        </div>
                    </div>
                    <button class="suggestion-action" onclick="alert('Implementation guide sent to your dashboard!')">Implement</button>
                `;
                
                return issueEl;
            }
            
            function generatePrioritySuggestions(results) {
                prioritySuggestions.innerHTML = '';
                
                // Collect all issues from all categories
                const allIssues = [];
                if (results.security.issues.length > 0) {
                    allIssues.push(...results.security.issues.map(issue => ({...issue, category: 'security'})));
                }
                if (results.performance.issues.length > 0) {
                    allIssues.push(...results.performance.issues.map(issue => ({...issue, category: 'performance'})));
                }
                if (results.seo.issues.length > 0) {
                    allIssues.push(...results.seo.issues.map(issue => ({...issue, category: 'seo'})));
                }
                if (results.accessibility.issues.length > 0) {
                    allIssues.push(...results.accessibility.issues.map(issue => ({...issue, category: 'accessibility'})));
                }
                
                // Sort by severity (high first)
                const severityOrder = {high: 3, medium: 2, low: 1};
                allIssues.sort((a, b) => severityOrder[b.severity] - severityOrder[a.severity]);
                
                // Display top 5 suggestions
                const topIssues = allIssues.slice(0, 5);
                
                if (topIssues.length === 0) {
                    prioritySuggestions.innerHTML = '<p>No critical issues found! Your website is in great shape.</p>';
                    return;
                }
                
                const suggestionsList = document.createElement('ul');
                suggestionsList.style.marginLeft = '20px';
                suggestionsList.style.marginBottom = '20px';
                
                topIssues.forEach(issue => {
                    const listItem = document.createElement('li');
                    listItem.style.marginBottom = '10px';
                    listItem.innerHTML = `
                        <strong>${issue.category.toUpperCase()}:</strong> ${issue.title} 
                        <span class="issue-severity ${issue.severity}">${issue.severity} priority</span>
                    `;
                    suggestionsList.appendChild(listItem);
                });
                
                prioritySuggestions.appendChild(suggestionsList);
            }
        });
    </script>
</body>
</html>

